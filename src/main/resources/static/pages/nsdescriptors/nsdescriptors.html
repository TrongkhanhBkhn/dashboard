<!--Copyright (c) 2016 Open Baton (http://www.openbaton.org)
 
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
 
      http://www.apache.org/licenses/LICENSE-2.0
 
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
 
  limitations under the License.-->
<div class="col-lg-12">
    <h1>
        Network Service Descriptors
        <small>List of NSDs</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#main"><i class="fa fa-dashboard"></i>
            Overview</a></li>
        <li class="active"><i class="fa fa-pencil-square-o"></i> NS Descriptors
        </li>
    </ol>
</div>
</div>
<div class="row">
    <div class="col-lg-12">
        <button id="deleteMultiple" href="#" ng-disabled="multipleDelete" class="btn btn-danger pull-right"
                ng-style="{'margin-left':'25px'}"
                title="Delete all the items selected" data-target="#deleteModal" data-toggle="modal">Delete
        </button>
        <button class="btn btn-primary pull-right"
                title="Upload a TOSCA complient package"
                ng-style="{'margin-left':'25px'}" data-target="#modalFileCSAR" data-toggle="modal">Upload CSAR NSD
        </button>
        <!--button id="btn_create_nsd" href="#" class="btn btn-primary pull-right"
                title="Create a new Network Service Descriptor" data-toggle="modal"
                data-target="#modalFile">Upload NSD
        </button-->
        <button ng-click="loadVNFD()" class="btn btn-primary pull-right"
                title="Create a new Network Service Descriptor">Add NSD
        </button>
        <!-- <button id="btn_create_nsdf" href="#" class="btn btn-primary pull-right"
                 title="Create a new Network Service Descriptor" data-toggle="modal"
                 ng-style="{'margin-right':'20px'}"
                 data-target="#modalForm">Create NSD
         </button>-->
    </div>
</div>
<div class="row">
    <div class="col-lg-12 top-buffer">
        <alert ng-repeat="alert in alerts" type="alert.type" close="closeAlert($index)">
            <div ng-bind-html="alert.msg"></div>
        </alert>
        <div class="table-responsive" ng-if="nsdescriptors.length > 0">
            <table ng-table="tableParamspaginationNSD"
                   class="table table-bordered table-striped table-hover tablesorter" id="nsdTabletable">
                <thead>
                <tr>
                    <td><input type="checkbox" ng-model="main.checkbox"></td>
                    <th class="col-sm-4" ng-click="predicate = 'id'; reverse = !reverse">Id <i class="fa fa-sort"></i>
                    </th>
                    <th ng-click="predicate = 'name'; reverse = !reverse">NSD Name <i class="fa fa-sort"></i></th>
                    <th ng-click="predicate = 'vendor'; reverse = !reverse">Vendor <i class="fa fa-sort"></i></th>
                    <th ng-click="predicate = 'version'; reverse = !reverse">Version <i class="fa fa-sort"></i></th>
                    <th ng-click="predicate = 'createdAt'; reverse = !reverse">Created at <i class="fa fa-sort"></i>
                    </th>
                    <th ng-click="predicate = 'updatedAt'; reverse = !reverse">Updated at <i class="fa fa-sort"></i>
                    </th>
                    <th>Actions <i class="fa"></i></th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="nsd in $data | orderBy:predicate:reverse">
                    <td><input type="checkbox" ng-init="selection.ids[nsd.id] = false" ng-model="selection.ids[nsd.id]"
                               name="group"
                               id="{{nsd.id}}"/></td>
                    <td><a href="#nsdescriptors/{{nsd.id}}">{{nsd.id}}</a></td>
                    <td class="text-center">{{nsd.name}}</td>
                    <td class="text-center">{{nsd.vendor}}</td>
                    <td class="text-center">{{nsd.version}}</td>
                    <td class="text-center">{{nsd.createdAt}}</td>
                    <td class="text-center">{{nsd.updatedAt}}</td>
                    <td class="text-center">
                        <div class="btn-group">
                            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"> Action
                                <span class="caret"></span></button>
                            <ul class="dropdown-menu" role="menu">
                                <li>
                                    <a href="" data-toggle="modal" data-target="#launchForm" data-backdrop="static"
                                       data-keyboard="false"
                                       ng-click="launchOption(nsd)">Launch</a>
                                <li><a href="" data-toggle="modal" data-target="#editModal"
                                       ng-click="edit(nsd)">Edit</a>
                                </li>
                                <li class="divider"></li>
                                <li><a href="" ng-click="deleteNSD(nsd)">Delete</a></li>
                            </ul>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<div class="modal fade" id="modalFile" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Save a Network Service Descriptor</h4>
            </div>
            <div class="modal-body">
                <form role="form" id="formJson">
                    <div class="form-group">
                        <br> <label for="jsonInputArea">Insert Your Json</label>
                        <textarea name="textTopologyJson" ng-model="textTopologyJson"
                                  ng-change="changeText(textTopologyJson)" id="jsonInputArea"
                                  class="form-control" rows="5" placeholder="{ }"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="jsonInputFile">File input</label>
                        <input type="file" id="jsonInputFile" onchange="angular.element(this).scope().setFile(this)">
                        <p class="help-block">Example: NetworkServiceDescriptor.json </p>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close
                </button>
                <button type="button" id="storeNSD" ng-click="sendFile(textTopologyJson)" class="btn btn-primary">Store
                    NSD
                </button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="addEditVDU" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Add/Edit a Virtual Deployment Unit</h4>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal">
                    <div class="form-group" ng-repeat="(key,value) in vduCreate" ng-if="key!='lifecycle_event' && key!='monitoring_parameter'
                         && key!='vm_image'&& key!='vnfc' && key!='vimInstanceName'">
                        <label for="{{key}}" class="col-sm-4 control-label">{{key}}</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="{{key}}" name="{{key}}"
                                   ng-model="vduCreate[key]"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="vimInstanceName" class="col-sm-4 control-label">vimInstanceName</label>

                        <div class="col-sm-6">
                            <!--          <select type="text" class="form-control" id="vimInstanceName" name="{{key}}"
                                             ng-model="vduCreate['vimInstance']['name']"/>-->
                            <select name="typeSelect" class="form-control modal-select"
                                    ng-model="vduCreate['vimInstanceName']"
                                    ng-options="vim.name as vim.name for vim in vimInstances | orderBy:'name':false"
                                    ng-change="">
                            </select>

                            <!--<select name="vimInstanceName" id="vimInstanceName" ng-model="vduCreate['vimInstanceName']">
                                <option ng-repeat="option in vimInstances" value="{{option.name}}">{{option.name}}</option>
                            </select>-->
                        </div>
                    </div>
                    <tabset>
                        <tab heading="lifecycle_event" ng-show="showTab(vduCreate.lifecycle_event.length)">
                            {{vduCreate.lifecycle_event}}
                        </tab>
                        <tab heading="monitoring_parameter">
                            <div class="">
                                <div class="">
                                    <h4 class="">
                                        <div class="col-lg-12">Monitoring Parameters
                                            <a class="pull-right" title="Add a New Monitoring Prameter" href=""
                                               ng-click="toggle = !toggle">
                                                <i class="fa fa-plus-square"> Add </i></a>
                                        </div>
                                    </h4>
                                </div>
                                <div ng-init="toggle = false" ng-if="toggle" id="">
                                    <br/>
                                    <br/>
                                    <br/>
                                    <div class="form-group">
                                        <label for="newValue" class="col-sm-4 control-label">new Value</label>
                                        <div class="col-sm-6">
                                            <div class="form-group input-group">
                                                <input class="form-control" type="text" ng-model="newValue">
                                                <span class="input-group-btn">
                                                <button class="btn btn-default" type="button"
                                                        ng-click="saveValueMP(newValue)"
                                                ><i class="fa fa-floppy-o"></i>
                                                </button>
                                            </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br/>
                            <ul class="col-lg-offset-3"
                                ng-repeat="mp in vduCreate.monitoring_parameter track by $index">
                                <li>{{mp}} <a href="" ng-click="deleteMP($index)"><i class="fa fa-trash-o"></i></a></li>
                            </ul>
                            <!--{{vduCreate.monitoring_parameter}}-->
                        </tab>
                        <tab heading="vm_image">
                            <div class="">
                                <div class="">
                                    <h4 class="">
                                        <div class="col-lg-12">Virtual Machine Images
                                            <a class="pull-right" title="Add a New VMI" href=""
                                               ng-click="toggle = !toggle">
                                            </a>
                                        </div>
                                    </h4>
                                    <div class="col-lg-offset-2" ng-repeat="vim in vimInstances">

                                        <div ng-if="vim.name==vduCreate.vimInstanceName"
                                             ng-repeat="image in vim.images">
                                            <input type="checkbox" name="selectedImages[]" value="{{image.name}}"
                                                   ng-checked="selection.indexOf(image.name) > -1"
                                                   ng-click="toggleSelection(image.name)"> {{image.name}}
                                        </div>
                                    </div>
                                </div>
                                <div ng-init="toggle = false" ng-if="toggle" id="">
                                    <br/>
                                    <br/>
                                    <br/>
                                </div>
                            </div>
                            <br/>
                            <ul class="col-lg-offset-3" ng-repeat="vmi in vduCreate.vm_image track by $index">
                                <li>{{vmi}} <a href="" ng-click="deleteVMI($index)"><i class="fa fa-trash-o"></i></a>
                                </li>
                            </ul>
                            <!--{{vduCreate.vm_image}}-->
                        </tab>
                        <tab heading="vnfc" ng-show="showTab(vduCreate.vnfc.length)">
                            {{vduCreate.vnfc}}
                        </tab>
                    </tabset>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close
                </button>
                <button type="button" id="editAddVDU" ng-click="addVDUtoVND()" class="btn btn-primary">Save VDU
                </button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modaladdDepFlavour" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Add/Edit a Deployment Unit</h4>
            </div>
            <div class="modal-body">
                <form role="form" id="form4" class="form-horizontal">
                    <div class="form-group" ng-repeat="(key,value) in depFlavor"
                         ng-if="key!='df_constraint' && key!='costituent_vdu'">
                        <label for="{{key}}" class="col-sm-4 control-label">{{key}}</label>

                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="{{key}}" name="{{key}}"
                                   ng-model="depFlavor[key]"/>
                        </div>
                    </div>
                    <tabset>
                        <tab heading="costituent_vdu">
                            <div class="">
                                <div class="">
                                    <h4 class="">
                                        <div class="col-lg-12">Costituent VDU
                                            <a class="pull-right" title="Add a New costituent_vdu" href=""
                                               ng-click="toggle = !toggle">
                                                <i class="fa fa-plus-square"> Add </i></a>
                                        </div>
                                    </h4>
                                </div>
                                <div ng-init="toggle = false" ng-if="toggle" id="">
                                    <br/>
                                    <br/>
                                    <br/>

                                    <div class="form-group">
                                        <label for="newValue" class="col-sm-4 control-label">new Value</label>
                                        <div class="col-sm-6">
                                            <div class="form-group input-group">
                                                <input class="form-control" type="text" ng-model="newValue">
                                                <span class="input-group-btn">
                                                <button class="btn btn-default" type="button"
                                                        ng-click="saveValueDFC(newValue)"
                                                ><i class="fa fa-floppy-o"></i>
                                                </button>
                                            </span>
                                            </div>
                                        </div>

                                    </div>

                                </div>
                            </div>
                            <br/>
                            <ul class="col-lg-offset-3" ng-repeat="dfc in depFlavor.df_constraint track by $index">
                                <li>{{dfc}} <a href="" ng-click="deleteDFC($index)"><i class="fa fa-trash-o"></i></a>
                                </li>
                            </ul>
                            <!--{{depFlavor.costituent_vdu}}-->
                        </tab>
                        <tab heading="df_constraint">
                            <div class="">
                                <div class="">
                                    <h4 class="">
                                        <div class="col-lg-12">DF Constraint
                                            <a class="pull-right" title="Add a New df_constraint" href=""
                                               ng-click="toggle = !toggle">
                                                <i class="fa fa-plus-square"> Add </i></a>
                                        </div>
                                    </h4>
                                </div>
                                <div ng-init="toggle = false" ng-if="toggle" id="">
                                    <br/>
                                    <br/>
                                    <br/>
                                    <div class="form-group">
                                        <label for="newValue" class="col-sm-4 control-label">new Value</label>

                                        <div class="col-sm-6">
                                            <div class="form-group input-group">
                                                <input class="form-control" type="text" ng-model="newValue">
                                                <span class="input-group-btn">
                                                <button class="btn btn-default" type="button"
                                                        ng-click="saveValueCVDU(newValue)"
                                                ><i class="fa fa-floppy-o"></i>
                                                </button>
                                            </span>
                                            </div>
                                        </div>

                                    </div>

                                </div>
                            </div>
                            <br/>
                            <ul class="col-lg-offset-3" ng-repeat="c_vdu in depFlavor.costituent_vdu track by $index">
                                <li>{{c_vdu}} <a href="" ng-click="deleteCVDU($index)"><i class="fa fa-trash-o"></i></a>
                                </li>
                            </ul>
                            <!--{{depFlavor.costituent_vdu}}-->
                        </tab>
                    </tabset>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close
                </button>
                <button type="button" id="storeDF" ng-click="storeDepFlavour()" class="btn btn-primary">Store DFlavour
                </button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="addEditVNDF" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Add/Edit a Virtual Network Function Descriptor</h4>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal">
                    <div class="form-group" ng-repeat="(key,value) in vnfdCreate" ng-if="key!='auto_scale_policy' && key!='connection_point' && key!='connection_point'
                         && key!='monitoring_parameter' && key!='vdu'&& key!='vdu_dependency'
                         && key!='deployment_flavour' && key!='lifecycle_event'&& key!='virtual_link' && key!='lifecycle_event'">
                        <label for="{{key}}" class="col-sm-4 control-label">{{key}}</label>

                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="{{key}}" name="{{key}}"
                                   ng-model="vnfdCreate[key]"/>
                        </div>
                    </div>
                    <tabset>
                        <tab class="" heading="auto_scale_policy"
                             ng-show="showTab(vnfdCreate.auto_scale_policy.length)">
                            {{vnfdCreate.auto_scale_policy}}
                        </tab>
                        <tab class="" heading="connection_point" ng-show="showTab(vnfdCreate.connection_point.length)">
                            {{vnfdCreate.connection_point}}
                        </tab>
                        <tab class="" heading="monitoring_parameter">
                            <div class="">
                                <div class="">
                                    <h4 class="">
                                        <div class="col-lg-12">Monitoring Parameters
                                            <a class="pull-right" title="Add a New Monitoring Prameter" href=""
                                               ng-click="toggle = !toggle">
                                                <i class="fa fa-plus-square"> Add </i></a>
                                        </div>
                                    </h4>
                                </div>
                                <div ng-init="toggle = false" ng-if="toggle" id="">
                                    <br/>
                                    <br/>
                                    <br/>
                                    <div class="form-group">
                                        <label for="newValue" class="col-sm-4 control-label">new Value</label>

                                        <div class="col-sm-6">
                                            <div class="form-group input-group">
                                                <input class="form-control" type="text" ng-model="newValue">
                                                <span class="input-group-btn">
                                                <button class="btn btn-default" type="button"
                                                        ng-click="saveValueMPfromVNFD(newValue)"
                                                ><i class="fa fa-floppy-o"></i>
                                                </button>
                                            </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br/>
                            <ul class="col-lg-offset-3"
                                ng-repeat="mp in vnfdCreate.monitoring_parameter track by $index">
                                <li>{{mp}} <a href="" ng-click="deleteMPfromVNFD($index)"><i class="fa fa-trash-o"></i></a>
                                </li>
                            </ul>
                            <!--{{vnfdCreate.monitoring_parameter}}-->
                        </tab>
                        <!---->
                        <tab class="" heading="vdu">
                            <div class="">
                                <div class="">
                                    <h4 class="">
                                        <div class="col-lg-12">Virtual Descriptor Unit
                                            <a class="pull-right" title="Add a New VDU" href="" ng-click="addVDU()">
                                                <i class="fa fa-plus-square"> Add </i></a>
                                        </div>
                                    </h4>
                                </div>
                            </div>
                            <br/>
                            <br/>
                            <div class="row">
                                <div class="" ng-style="{'padding-left':'40px','padding-right':'40px'}"
                                     ng-repeat="vdu in vnfdCreate.vdu track by $index">

                                    <div class="row">
                                        <spam ng-repeat="(key,value) in vdu" ng-if="!isEmpty(value)">
                                            <b>{{key}}</b>: {{value}}
                                            <spam ng-if="!$last"><br/></spam>
                                        </spam>
                                        <div class="pull-right">
                                            <a href="" title="Edit VDU" ng-click="editVDU(vdu,$index)">
                                                <i class="fa fa-pencil-square"> &nbsp; &nbsp;</i></a>
                                            <a href="" title="Delete VDU" ng-click="deleteVDU($index)">
                                                <i class="fa fa-trash-o"> </i></a>
                                        </div>
                                    </div>
                                    <hr class="hr_title"/>
                                </div>
                            </div>
                        </tab>
                        <tab class="" heading="vdu_dependency" ng-show="showTab(vnfdCreate.vdu_dependency.length)">
                            {{vnfdCreate.vdu_dependency}}
                        </tab>
                        <tab class="" heading="deployment_flavour">
                            <h4 class="">
                                <div class="col-lg-12">Deployment Flavour
                                    <a class="pull-right" title="Add a New Deployment Flavour" href=""
                                       ng-click="addDepFlavour()">
                                        <i class="fa fa-plus-square"> Add </i></a>
                                </div>
                            </h4>
                            <br/>
                            <br/>
                            <div class="row">
                                <div class="" ng-style="{'padding-left':'40px','padding-right':'40px'}"
                                     ng-repeat="df in vnfdCreate.deployment_flavour track by $index">

                                    <div class="row">
                                        <spam ng-repeat="(key,value) in df" ng-if="!isEmpty(value)">
                                            <b>{{key}}</b>: {{value}}
                                            <spam ng-if="!$last"><br/></spam>
                                        </spam>
                                        <div class="pull-right">
                                            <a href="" title="Edit this Deployment Flavour"
                                               ng-click="editDF(df,$index)">
                                                <i class="fa fa-pencil-square"> &nbsp; &nbsp;</i></a>
                                            <a href="" title="Delete this Deployment Flavour"
                                               ng-click="deleteDF($index)">
                                                <i class="fa fa-trash-o"> </i></a>
                                        </div>
                                    </div>
                                    <hr class="hr_title"/>
                                </div>
                            </div>
                            <!--{{vnfdCreate.deployment_flavour}}-->
                        </tab>
                        <tab class="" heading="lifecycle_event" ng-show="showTab(vnfdCreate.lifecycle_event.length)">
                            <!--   {{vnfdCreate.lifecycle_event}}-->
                            <h4 class="">
                                <div class="col-lg-12">Lifecycle Event
                                    <a class="pull-right" title="Add a New Lifecycle Event" href=""
                                       ng-click="addLifecycleEvent()">
                                        <i class="fa fa-plus-square"> Add </i></a>
                                </div>
                            </h4>
                            <br/>
                            <br/>
                            <div class="row">
                                <div class="" ng-style="{'padding-left':'40px','padding-right':'40px'}"
                                     ng-repeat="le in vnfdCreate.lifecycle_event track by $index">

                                    <div class="row">
                                        <spam ng-repeat="(key,value) in le" ng-if="!isEmpty(value)">
                                            <b>{{key}}</b>: {{value}}
                                            <spam ng-if="!$last"><br/></spam>
                                        </spam>
                                        <div class="pull-right">
                                            <a href="" title="Edit this Lifecycle Event"
                                               ng-click="editLEfromVNFD(le,$index)">
                                                <i class="fa fa-pencil-square"> &nbsp; &nbsp;</i></a>
                                            <a href="" title="Delete this Lifecycle Event"
                                               ng-click="deleteLEfromVNFD($index)">
                                                <i class="fa fa-trash-o"> </i></a>
                                        </div>
                                    </div>
                                    <hr class="hr_title"/>
                                </div>
                            </div>
                        </tab>
                        <tab class="" heading="virtual_link" ng-show="showTab(vnfdCreate.virtual_link.length)">
                            {{vnfdCreate.virtual_link}}
                        </tab>
                    </tabset>
                    <!--{{vnfdCreate}}-->
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close
                </button>
                <button type="button" id="editAddNVNFD" ng-click="sendVNFD()" class="btn btn-primary">Save VNFD
                </button>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="modalCreateNSD" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header panel-heading">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <span class="modal-title" id="serviceFormLabel">Add a Network Service Descriptor</span>
            </div>
            <tabset class="dailougebox">
                <tab heading="Create NSD">
                    <div class="modal-header">
                        <h4 class="modal-title" id="serviceFormLabel">Create a Network Service Descriptor</h4>
                        Here you can create an NSD via choosing the VNFDs that you have in your database. Choose the
                        name of the VNFD from the catalogue
                        and click plus to add to it to the new NSD. All virtual links referenced in the VNFDs must be
                        present
                        in the VLDs.
                    </div>
                    <div class="modal-body">
                        <button ng-if="data.serviceContainers.length == 0" class="btn btn-default" data-toggle="modal"
                                data-target="#addContainerModal">Add Container
                        </button>
                        <form class="form-horizontal" role="form" id="formAddService">
                            <div class="form-group">
                                <span for="name" class="col-sm-2 control-label leftalign">Name</span>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control leftalign" id="name" name="name"
                                           ng-model="nsdCreateTmp.name"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <span for="vendor" class="col-sm-2 control-label leftalign">Vendor</span>

                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="vendor" name="vendor"
                                           ng-model="nsdCreateTmp.vendor"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <span for="version" class="col-sm-2 control-label leftalign">Version</span>

                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="version" name="version"
                                           ng-model="nsdCreateTmp.version"/>
                                </div>
                            </div>
                            <div class="input-group">
                                <span>VNFD in the Catalogue</span>
                                <select name="typeSelect" class="form-control input-margintop" ng-model="selectedVNFD"
                                        ng-options="vnfd.name for vnfd in vnfdList| orderBy:'itemKey':false">
                                </select>
                                <span class="input-group-btn">
                            <button class="btn btn-success radiusnone" ng-click="addTONSD(selectedVNFD)" type="button"
                                    title="Add this VNFD to NSD" ng-style="{'margin-top':'25px'}">
                                <span class="fa fa-plus" aria-hidden="true"></span>
                                </button>
                                </span>
                            </div>
                            <div ng-if="selectedVNFD">
                                <!--tabset>
                            <tab heading="Info">
                                <div class="table-responsive">
                                    <h4>Information</h4>
                                    <table
                                            class="table table-bordered table-striped table-hover tablesorter"
                                            id="">
                                        <thead>
                                        <tr>
                                            <th>name</th>
                                            <th>type</th>
                                            <th>version</th>
                                            <th>vendor</th>
                                            <th>endpoint</th>
                                            <th>configurations</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="vdu in selectedVNFD.vdu | orderBy:predicate:reverse">
                                            <td>{{selectedVNFD.name}}</td>
                                            <td>{{selectedVNFD.type}}</td>
                                            <td>{{selectedVNFD.version}}</td>
                                            <td>{{selectedVNFD.vendor}}</td>
                                            <td>{{selectedVNFD.endpoint}}</td>
                                            <td>{{selectedVNFD.configurations.name}}:
                                                <pairlist
                                                        ng-repeat="cp in selectedVNFD.configurations.configurationParameters">
                                                    <pair>
                                                        <key><b>{{cp.confKey}}:</b>
                                                            <key>
                                                                <value>{{cp.value}}</value>
                                                    </pair>
                                                    <span ng-if="!$last">,</span>
                                                </pairlist>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </tab>
                            <tab heading="Vdu">
                                <div class="table-responsive" ng-show="selectedVNFD.vdu.length > 0">
                                    <h4>Virtual Deployment Unit</h4>
                                    <table
                                            class="table table-bordered table-striped table-hover tablesorter"
                                            id="vduTabletable">
                                        <thead>
                                        <tr>
                                            <th>version</th>
                                            <th>vm image</th>
                                            <th>vim Name</th>
                                            <!--<th ng-click="predicate = 'vnfc_instance'; reverse = !reverse">vnfc_instance <i
                                                    class="fa fa-sort"></i>
                                            </th>>
                                            <th ng-click="predicate = 'vnfc.id'; reverse = !reverse">vnfc <i
                                                    class="fa fa-sort"></i>
                                            </th>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="vdu in selectedVNFD.vdu | orderBy:predicate:reverse">
                                            <td>{{vdu.version}}</td>
                                            <td>{{vdu.vm_image}}</td>
                                            <td>{{vdu.vimInstanceName}}</td>
                                            <!--<td>{{vdu.vnfc_instance}}</td>>
                                            <td>
                                                <ul ng-repeat="vnfc in vdu.vnfc">
                                                    <li ng-repeat="cp in vnfc.connection_point">
                                                        <b>{{cp.virtual_link_reference}}</b>: <span title="floatingIp">{{cp.floatingIp}}</span>
                                                    </li>
                                                </ul>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </tab>
                            <tab heading="Lifecycle Event">
                                <div class="table-responsive" ng-show="selectedVNFD.lifecycle_event.length > 0">
                                    <h4>Lifecycle Event</h4>
                                    <table
                                            class="table table-bordered table-striped table-hover tablesorter"
                                            id="">
                                        <thead>
                                        <tr>

                                            <th ng-click="predicate = 'event'; reverse = !reverse">event</th>
                                            <th ng-click="predicate = 'lifecycle_events'; reverse = !reverse">lifecycle
                                                events
                                            </th>

                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="le in selectedVNFD.lifecycle_event | orderBy:predicate:reverse">

                                            <td>{{le.event}}</td>
                                            <td><span ng-repeat="ev in le.lifecycle_events">{{ev}}<span
                                                    ng-if="!$last">, </span></span></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </tab>
                            <tab heading="Deployment Flavour">
                                <div class="table-responsive" ng-show="selectedVNFD.deployment_flavour.length > 0">
                                    <h4>Deployment Flavour</h4>
                                    <table
                                            class="table table-bordered table-striped table-hover tablesorter"
                                            id="">
                                        <thead>
                                        <tr>
                                            <th>Version</th>
                                            <th>flavour key</th>
                                            <th>df Constraint</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="df in selectedVNFD.deployment_flavour | orderBy:predicate:reverse">
                                            <td>{{df.version}}</td>
                                            <td>{{df.flavour_key}}</td>
                                            <td>
                                                {{df.df_constraint}}
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </tab>
                            <tab heading="Virtual Link" ng-show="selectedVNFD.virtual_link.length > 0">
                                <div class="table-responsive">
                                    <h4>Virtual Link</h4>
                                    <table
                                            class="table table-bordered table-striped table-hover tablesorter"
                                            id="">
                                        <thead>
                                        <tr>
                                            <th>name</th>
                                            <th>extId</th>
                                            <th>qos</th>

                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="vl in vnfd.virtual_link | orderBy:predicate:reverse">
                                            <td>{{vl.name}}</td>
                                            <td>{{vl.extId}}</td>
                                            <td>{{vl.qos}}</td>

                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </tab>
                        </tabset-->
                            </div>
                        </form>
                        <div class="" ng-if="tmpVnfd.length > 0">
                            <hr>
                            <b>VNFDs in NSD</b>
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Type</th>
                                    <th>Endpoint</th>
                                    <th>Delete</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="vnfd in tmpVnfd track by $index">
                                    <td>{{vnfd.name}}</td>
                                    <td>{{vnfd.type}}</td>
                                    <td>{{vnfd.endpoint}}</td>
                                    <td><a href="" ng-click="deleteVNFDfromNSD($index)"><span
                                            class="fa fa-trash"></span></a>
                                    </td>
                                <tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="" ng-if="nsdCreateTmp.vnfd.length > 0">
                            <hr>
                            <b>Dependencies</b>
                            <a title="add a new dependency" href="" data-target="#modalDependency"
                               data-toggle="modal"><span class="fa fa-plus-square"></span></a>
                            <table class="table table-condensed">
                                <thead>
                                <tr>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Parameters</th>
                                    <th>Delete</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="dependency in nsdCreateTmp.vnf_dependency track by $index">
                                    <td>{{dependency.source.name}}</td>
                                    <td>{{dependency.target.name}}</td>
                                    <td>{{dependency.parameters}}</td>
                                    <td><a href="" ng-click="deleteDependency($index)"><span class="fa fa-trash"></span></a>
                                    </td>

                                <tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="">
                            <hr>
                            <span style="margin-bottom: 10px;">Virtual Link Descriptor</span>
                            <div class="form-group">
                                <label style="display: none;" for="vld" class="col-sm-4 control-label"></label>
                                <div class="form-group input-group">
                                    <input class="form-control input-margintop" type="text" ng-model="vld" id="vld">
                                    <span class="input-group-btn">
                                                <button class="btn btn-success radiusnone" type="button"
                                                        ng-click="addVld(vld)" title="Add this Virtual Link Descriptor"
                                                ><i class="fa fa-floppy-o"></i>
                                                </button>
                                            </span>
                                </div>
                            </div>
                            <ul style="padding-left:0px; ">
                                <li ng-repeat="vld in nsdCreateTmp.vld track by $index">{{vld.name}}
                                    <a href="" ng-click="removeVld($index)"><span class="fa fa-trash"></span></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!--modal-body-->
                    <div class="modal-footer paddinbottom">
                        <button type="button" id="closeModal" class="btn btn-default" data-dismiss="modal">Close
                        </button>
                        <button type="button" id="addService" class="btn btn-primary"
                                ng-disabled="nsdCreateTmp.name.length < 1 || nsdCreateTmp.vendor.length < 1 || nsdCreateTmp.vnfd.length < 1"
                                ng-click="sendNSDCreate()">Create
                            NSD
                        </button>
                    </div>
                    <!--footer-->
                </tab>
                <tab heading="Upload NSD">
                    <div class="modal-header">
                        <h4 class="modal-title">Save a Network Service Descriptor</h4>
                        Here you can add an NSD via pasting the json or choosing a file. The NSD can contain either the
                        whole VNFDs or their ids.
                    </div>
                    <div class="modal-body">

                        <form role="form" id="formJson">
                            <div class="form-group">

                                <br> <label for="jsonInputArea">Insert Your Json</label>
                                <textarea name="textTopologyJson" ng-model="textTopologyJson"
                                          ng-change="changeText(textTopologyJson)" id="jsonInputArea"
                                          class="form-control verticalresize" rows="5" placeholder="{ }"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="jsonInputFile">File input</label>
                                <input type="file" id="jsonInputFile"
                                       onchange="angular.element(this).scope().setFile(this)">

                                <p class="help-block">Example: NetworkServiceDescriptor.json </p>
                            </div>
                        </form>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close
                        </button>
                        <button type="button" id="storeNSD" ng-click="sendFile(textTopologyJson)"
                                class="btn btn-primary">Store NSD
                        </button>
                    </div>
                </tab>
                <!--tab heading="Upload CSAR">



                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Upload a CSAR NSD</h4>



                <form role="form" id="my-dropzone" class="">
                    <h4>Drag and drop files below</h4>

                    <div class="upload-drop-zone dz-clickable dz-default dz-message" id="drop-zone">
                        Just drag and drop files here
                    </div>

                    <div class="table table-striped" class="files" id="previews">

                        <div id="template" class="file-row">
                            < This is used as the file preview template >
                            <div>
                                <span class="preview"><img data-dz-thumbnail/></span>
                            </div>
                            <div>
                                <p class="name" data-dz-name></p>
                                <strong class="error text-danger" data-dz-errormessage></strong>
                            </div>
                            <div>
                                <p class="size" data-dz-size></p>

                                <div id="total-progress" class="progress progress-striped active" role="progressbar"
                                     aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                                    <div class="progress-bar progress-bar-success" style="width:0%;"
                                         data-dz-uploadprogress></div>
                                </div>
                            </div>
                            <div>
                                <button data-dz-remove class="btn btn-warning cancel">
                                    <i class="glyphicon glyphicon-ban-circle"></i>
                                    <span>Cancel</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            
            <div class="modal-footer">
                <button type="button" class="btn btn-default"
                        data-dismiss="modal">Close
                </button>
                <button type="button" id="submit-all" class="btn btn-primary">Send All</button>
            </div>
        

                </tab-->
                <!--modal-content-->
        </div>
        <!--modal-dialog-->
    </div>
</div>
<!-- /.modal -->
<div class="modal fade" id="modalDependency" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Add a new Dependency</h4>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal" id="form7">
                    <div>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="col-sm-6">
                                    <label class="control-label" ng-init=""> Source</label>
                                    <select name="typeSelect" class="form-control modal-select"
                                            ng-model="dependency.source.name"
                                            ng-options="vnfd.name as vnfd.name for vnfd in tmpVnfd"
                                            ng-change="">
                                    </select>
                                </div>
                                <div class="col-sm-6">
                                    <label class="control-label" ng-init=""> Target:</label>
                                    <!--{{vnf.deployment_flavour}}-->
                                    <select name="typeSelect" class="form-control modal-select"
                                            ng-model="dependency.target.name"
                                            ng-options="vnfd.name as vnfd.name for vnfd in tmpVnfd"
                                            ng-change="">
                                    </select>
                                </div>
                            </div>
                        </div>
                        <br/>
                        <br/>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="form-group">
                                    <label for="newValue" class="col-sm-4 control-label">Parameters</label>
                                    <div class="col-sm-6">
                                        <div class="form-group input-group">
                                            <input class="form-control" type="text" ng-model="newValue">
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="button"
                                                        ng-click="addParam(newValue)"
                                                ><i class="fa fa-floppy-o"></i>
                                                </button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <ul>
                            <li ng-repeat="par in dependency.parameters track by $index">{{par}}
                                <a href="" ng-click="removeParam($index)"><span class="fa fa-trash"></span></a>
                            </li>
                        </ul>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close
                </button>
                <button type="button" id="" ng-click="saveDependency()" class="btn btn-primary">Save Dependency
                </button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" tabindex="-1" role="dialog" id="editModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Edit</h4>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal">
                    <div class="form-group" ng-repeat="(key,value) in editObj"
                         ng-if="key!='id' && isArray(value) && key!='hb_version' && key!='projectId' && key!='enabled' && key!='updatedAt' && key!='createdAt'">
                        <label for="{{key}}" class="col-sm-4 control-label">{{key}}</label>

                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="{{key}}" name="{{key}}"
                                   ng-model="editObj[key]"/>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" ng-click="updateObj()">Update</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
<div class="modal fade" tabindex="-1" role="dialog" id="deleteModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Delete Alert</h4>
            </div>
            <div class="modal-body">
                <p>You have selected:</p>
                <ul ng-repeat="(k,v) in selection.ids" ng-if="v">
                    <li>{{k}}</li>
                </ul>
                <p>Please confirm your selection.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" ng-click="multipleDeleteReq()" data-dismiss="modal">
                    Delete
                </button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<div class="modal fade" tabindex="-1" role="dialog" id="launchForm" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Launch Network Service Descriptor</h4>
            </div>
            <div class="modal-body">
                <div class="container" style="width: 100%">
                    <ul class="nav nav-pills nav-stacked col-md-2">
                        <li class="active"><a href="#PoPs" data-toggle="pill">PoPs</a></li>
                        <li><a href="#Keys" data-toggle="pill">Keys</a></li>
                        <li><a href="#ConfigurationParameters" data-toggle="pill">Configuration Parameters</a></li>
                        <li><a href="#MonitoringIP" data-toggle="pill">Monitoring IP </a></li>
                    </ul>
                    <div class="tab-content col-md-10">
                        <div class="tab-pane active" id="PoPs">
                            <div class="container-fluid">
                                <div class="row">
                                    <p>
                                        <br/>
                                        A Point-of-Presence (PoP) defines where to deploy a VNF Component. In the
                                        following you
                                        can choose where to deploy an NSD
                                        or VNFDs.
                                    </p>
                                    <div class="border-none">
                                        <tabset style="border: none !important;">
                                            <tab ng-repeat="tab in tabs" ng-attr-id="{{tab.id}}" heading="{{tab.title}}"
                                                 active="tab.active" disabled="tab.disabled"
                                                 select="selectTab(tab.id)" ng-click="selectVnfd(tab.vnfd)">
                                                <div ng-init="selectVnfd(tab.vnfd)" class="tab-text">
                                                    <div class="col-md-6">
                                                        <p>
                                                            <br>
                                                            The following list shows which PoPs are available.
                                                            <br>
                                                        </p>
                                                        <div ng-init="popTable.expanded=true">
                                                            <p style="font-size:20px">
                                                                <a href="" ng-if="popTable.expanded"
                                                                   ng-click="popTable.expanded = false">-</a>
                                                                <a href="" ng-if="!popTable.expanded"
                                                                   ng-click="popTable.expanded = true">+</a>Available
                                                                ({{launchPopsAvailable[tab.vnfd.name].pops.length}})
                                                            </p>
                                                            <div ng-if="popTable.expanded">
                                                                <table style="text-align: left;"
                                                                       ng-table="tableParamsFilteredPops"
                                                                       class="table table-bordered table-striped"
                                                                       show-filter="true">
                                                                    <!--<tr ng-init="key.expanded=false" ng-repeat-start="key in $data">-->
                                                                    <thead>
                                                                    <tr>
                                                                        <td colspan="3" filter="{name: 'text'}"
                                                                            sortable="'name'"><b>Name</b></td>
                                                                    </tr>
                                                                    </thead>
                                                                    <tr ng-repeat="vimInstance in $data track by $index">
                                                                        <!--<td>-->
                                                                        <!--<a href="" ng-if="vimInstance.expanded"-->
                                                                        <!--ng-click="vimInstance.expanded = false">-</a>-->
                                                                        <!--<a href="" ng-if="!vimInstance.expanded"-->
                                                                        <!--ng-click="vimInstance.expanded = true">+</a>-->
                                                                        <!--</td>-->
                                                                        <td class="col-md-5">
                                                                            {{vimInstance.name}}
                                                                        </td>
                                                                        <td class="col-md-3"
                                                                            style="text-align: center;">
                                                                            <a ng-if="vimInstance.name.length"
                                                                               title="Add a new PoP to this NSR" href=""
                                                                               ng-click="addPopToVnfd(tab.vnfd, vimInstance, launchPopTable)"><i
                                                                                    class="fa fa-plus"
                                                                                    aria-hidden="true"></i> Add
                                                                            </a>
                                                                        </td>
                                                                        <td class="col-md-4"
                                                                            style="text-align: center !important;">
                                                                            <a ng-if="vimInstance.name.length"
                                                                               title="Add a new PoP to this NSR" href=""
                                                                               ng-click="addPopToNsd(vimInstance, launchPopTable)"><i
                                                                                    class="fa fa-plus"
                                                                                    aria-hidden="true"></i> Add
                                                                                to all
                                                                            </a>
                                                                        </td>
                                                                    </tr>
                                                                    <tr ng-show="!$data.length">
                                                                        <td>
                                                                            No more PoPs are available
                                                                        </td>
                                                                    </tr>
                                                                    <!--<tr ng-if="key.expanded" ng-repeat-end="">-->
                                                                    <!--<td colspan="2" style='text-align:center;vertical-align:middle'><h5>Public Key</h5></td>-->
                                                                    <!--<td colspan="2" style="word-wrap: break-word">{{key.publicKey}}</td>-->
                                                                    <!--</tr>-->
                                                                </table>

                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <p>
                                                            <br/>
                                                            The following list shows which PoPs are choosen for the
                                                            selected VNFD.
                                                        </p>
                                                        <div ng-init="launchPopTable.expanded=true">
                                                            <p style="font-size:20px">
                                                                <a href="" ng-if="launchPopTable.expanded"
                                                                   ng-click="launchPopTable.expanded = false">-</a>
                                                                <a href="" ng-if="!launchPopTable.expanded"
                                                                   ng-click="launchPopTable.expanded = true">+</a>
                                                                Assigned
                                                                ({{launchPops[tab.vnfd.name].pops.length}})
                                                            </p>
                                                            <div ng-if="launchPopTable.expanded">
                                                                <table ng-table="tableParamsFilteredLaunchPops"
                                                                       class="table table-bordered table-striped"
                                                                       show-filter="true">
                                                                    <!--<tr ng-init="key.expanded=false" ng-repeat-start="key in $data">-->
                                                                    <thead>
                                                                    <tr>
                                                                        <td colspan="2" filter="{name: 'text'}"
                                                                            sortable="'name'"><b>Name</b></td>
                                                                    </tr>
                                                                    </thead>
                                                                    <tr ng-repeat="vimInstance in $data track by $index">
                                                                        <!--<td>-->
                                                                        <!--<a href="" ng-if="vimInstance.expanded"-->
                                                                        <!--ng-click="vimInstance.expanded = false">-</a>-->
                                                                        <!--<a href="" ng-if="!vimInstance.expanded"-->
                                                                        <!--ng-click="vimInstance.expanded = true">+</a>-->
                                                                        <!--</td>-->
                                                                        <td class="col-md-9">
                                                                            {{vimInstance.name}}
                                                                        </td>
                                                                        <td style="text-align: center;"
                                                                            class="col-md-3">
                                                                            <a ng-if="vimInstance.name.length"
                                                                               title="Add a new PoP to this NSR" href=""
                                                                               ng-click="removePopToVnfd(tab.vnfd, vimInstance)">
                                                                                <i class="fa fa-trash-o"
                                                                                   aria-hidden="true"></i> Del
                                                                            </a>
                                                                        </td>
                                                                    </tr>
                                                                    <tr ng-show="!$data.length">
                                                                        <td>
                                                                            No PoPs are choosen for the selected VNFD.
                                                                        </td>
                                                                    </tr>
                                                                    <!--<tr ng-if="key.expanded" ng-repeat-end="">-->
                                                                    <!--<td colspan="2" style='text-align:center;vertical-align:middle'><h5>Public Key</h5></td>-->
                                                                    <!--<td colspan="2" style="word-wrap: break-word">{{key.publicKey}}</td>-->
                                                                    <!--</tr>-->
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>


                                                </div>
                                            </tab>
                                        </tabset>

                                    </div>
                                    <!-- /col -->
                                </div>
                                <!-- /row -->

                            </div>
                            <!-- container -->

                            <!--<div class="modal-body">-->
                            <!--<div class="row">-->
                            <!--<form role="form" class="form-horizontal">-->
                            <!--<h3 title="Choose a VIM for the NSR. You can expand the NSD to lower level if you have named VDUs">-->
                            <!--<a href="" ng-click="addPoPtoNSD()">-->
                            <!--<li class="fa fa-plus-square" ng-disabled="vnfdLevelVim"></li>-->
                            <!--</a></h3>-->

                            <!--<td><input ng-disabled="!vduWithName" ng-click="clearPoPs()" type="checkbox"-->
                            <!--ng-init="vnfdLevelVim = false" ng-model="vnfdLevelVim"/> Expand-->
                            <!--</td>-->

                            <!--<div class="row" ng-repeat="vim in launchNsdVim track by $index">-->
                            <!--<label for="action" class="col-sm-1 control-label"></label>-->
                            <!--<div class="col-sm-3">-->
                            <!--<select title="Will be ignored if lower level VIM selection chosen, disabled if no vdu with names are available"-->
                            <!--ng-disabled="!vduWithName" name="typeSelect"-->
                            <!--class="form-control modal-select" id="action"-->
                            <!--ng-model="launchNsdVim[$index]"-->
                            <!--ng-options="vim.name as vim.name for vim in vimInstances"-->
                            <!--ng-change="">-->
                            <!--</select>-->

                            <!--</div>-->
                            <!--<div class="col-sm-1">-->
                            <!--<a href="" ng-click="launchNsdVim.splice($index, 1)">-->
                            <!--<h4>-->
                            <!--<li class="fa fa-trash"></li>-->
                            <!--</h4>-->
                            <!--</a>-->
                            <!--</div>-->

                            <!--</div>-->

                            <!--</form>-->
                            <!--</div>-->
                            <!--</div>-->
                            <!--<div class="form-group row">-->
                            <!--<form role="form" class="form-horizontal" ng-show="vnfdLevelVim">-->

                            <!--<div class="form-group" ng-repeat="vnfdToVIMel in vnfdToVIM track by $index">-->
                            <!--<div class="form-group row">-->
                            <!--<label for="action" class="col-sm-7 control-label"> {{vnfdToVIMel.vnfdname}}-->
                            <!--<td><input title="If there are no VDU with name, this parameter is disabled"-->
                            <!--ng-click="clearPoPSVNFD($index)"-->
                            <!--ng-disabled="vnfdToVIMel.vdu.length === 0" type="checkbox"-->
                            <!--ng-model="vnfdToVIMel.vduLevel"/>Expand-->
                            <!--</td>-->
                            <!--<a href="" ng-click="addPoPtoVNFD($index)">-->
                            <!--<li class="fa fa-plus-square" ng-disabled="vnfdToVIMel.vduLevel"></li>-->
                            <!--</a></label>-->
                            <!--</div>-->

                            <!--<div class=" form-group row" ng-repeat="vim in vnfdToVIMel.vim track by $index">-->
                            <!--<div class="col-sm-6"></div>-->
                            <!--<div class="col-sm-3">-->
                            <!--<select ng-disabled="vnfdToVIMel.vduLevel" name="typeSelect"-->
                            <!--class="form-control modal-select" id="action"-->
                            <!--ng-model="vnfdToVIMel.vim[$index]"-->
                            <!--ng-options="vim.name as vim.name for vim in vimInstances"-->
                            <!--ng-change="">-->
                            <!--</select>-->

                            <!--</div>-->
                            <!--<div class="col-sm-1">-->
                            <!--<a href="" ng-click="vnfdToVIMel.vim.splice($index, 1)">-->
                            <!--<h4>-->
                            <!--<li class="fa fa-trash"></li>-->
                            <!--</h4>-->
                            <!--</a>-->
                            <!--</div>-->

                            <!--</div>-->


                            <!--<div class="form-group row">-->
                            <!--<div ng-show="vnfdToVIMel.vduLevel"-->
                            <!--ng-repeat="vduEl in vnfdToVIMel.vdu track by $index">-->
                            <!--<div class="form-group row">-->
                            <!--<label for="action" class="col-sm-7 control-label">{{vduEl.vduName}} <a-->
                            <!--href="" ng-click="addPoPtoVDU($index, $parent.$index)">-->
                            <!--<li class="fa fa-plus-square"></li>-->
                            <!--</a></label>-->
                            <!--</div>-->

                            <!--<div class=" form-group row" ng-repeat="vim in vduEl.vim track by $index">-->
                            <!--<div class="col-sm-7"></div>-->
                            <!--<div class="col-sm-3">-->

                            <!--<select name="typeSelect" class="form-control modal-select" id="action"-->
                            <!--ng-model="vduEl.vim[$index]"-->
                            <!--ng-options="vim.name as vim.name for vim in vimInstances"-->
                            <!--ng-change="">-->
                            <!--</select>-->
                            <!--</div>-->
                            <!--<div class="col-sm-1">-->
                            <!--<a href=""-->
                            <!--ng-click="deletePoPfromVDU($parent.$parent.$index, $parent.$index, $index)">-->
                            <!--<h4>-->
                            <!--<li class="fa fa-trash"></li>-->
                            <!--</h4>-->
                            <!--</a>-->
                            <!--</div>-->
                            <!--</div>-->
                            <!--</div>-->

                            <!--</div>-->

                            <!--</div>-->
                            <!--</form>-->
                            <!--</div>-->

                        </div>
                        <div class="tab-pane" id="Keys">
                            <form role="form" class="form-horizontal">
                                <br>
                                <p> A key pair allows you to SSH into your VNF Component Instances. You may select an
                                    existing
                                    key pair,
                                    import a key pair, or generate a new key pair.</p>
                                <div class="row">
                                    <div class="col-lg-12">
                                        <button href="#" class="btn btn-primary" title="Add a new key pair"
                                                data-toggle="modal" data-target="#addKey">Import key
                                        </button>
                                        <button href="#" class="btn btn-primary" title="Add a new key pair"
                                                data-toggle="modal" data-target="#createKey">Create key
                                        </button>
                                    </div>
                                    <div class="col-md-6">
                                        <p>
                                            <br> The following list shows all the Keys that are available to put into
                                            the VNF Component Instances.
                                        </p>
                                        <div ng-init="keys_exp.expanded=true">
                                            <p style="font-size:20px">
                                                <a href="" ng-if="keys_exp.expanded" ng-click="keys_exp.expanded = false">-</a>
                                                <a href="" ng-if="!keys_exp.expanded" ng-click="keys_exp.expanded = true">+</a>
                                                Available
                                                ({{keys.length}})
                                            </p>
                                            <div ng-if="keys_exp.expanded">
                                                <table style="text-align: left;" ng-table="tableParamsFilteredKeys"
                                                       class="table table-bordered table-striped">
                                                    <!--<tr ng-init="key.expanded=false" ng-repeat-start="key in $data">-->
                                                    <thead>
                                                    <tr>
                                                        <td colspan="3" filter="{name: 'text'}"
                                                            sortable="'name'"><b>Name</b></td>
                                                    </tr>
                                                    </thead>
                                                    <tr ng-repeat="key in keys">
                                                        <!--<td>-->
                                                        <!--<a href="" ng-if="key.expanded"-->
                                                        <!--ng-click="key.expanded = false">-</a>-->
                                                        <!--<a href="" ng-if="!key.expanded"-->
                                                        <!--ng-click="key.expanded = true">+</a>-->
                                                        <!--</td>-->
                                                        <td class="col-md-7" style="word-wrap: break-word">
                                                            {{key.name}}
                                                        </td>
                                                        <td class="col-md-3"
                                                            style="word-wrap: normal; max-width: 100px; overflow: hidden; text-overflow: ellipsis;"
                                                            ng-attr-title="{{key.fingerprint}}">{{key.fingerprint}}
                                                        </td>
                                                        <td class="col-md-2">
                                                            <a ng-if="key.name.length" title="Add a new key to this NSR"
                                                               href=""
                                                               ng-click="addLaunchKey(key)">Add
                                                            </a>
                                                        </td>
                                                    </tr>
                                                    <tr ng-show="!keys.length">
                                                        <td>No more keys are available.
                                                        </td>
                                                    </tr>
                                                    <!--<tr ng-if="key.expanded" ng-repeat-end="">-->
                                                    <!--<td colspan="2" style='text-align:center;vertical-align:middle'><h5>Public Key</h5></td>-->
                                                    <!--<td colspan="2" style="word-wrap: break-word">{{key.publicKey}}</td>-->
                                                    <!--</tr>-->
                                                </table>
                                            </div>
                                        </div>
                                        <!--<div class="form-group" ng-repeat="key in launchKeys track by $index">-->
                                        <!--&lt;!&ndash;label for="action" class="col-sm-2 control-label">Key</label&ndash;&gt;-->
                                        <!--<div class="col-sm-5">-->
                                        <!--<select name="typeSelect" class="form-control modal-select" id="action"-->
                                        <!--ng-model="launchKeys[$index]"-->
                                        <!--ng-options="key.name as key.name for key in keys"-->
                                        <!--ng-change="">-->
                                        <!--</select>-->
                                        <!--</div>-->

                                        <!--<div class="col-sm-1">-->
                                        <!--<a href="" ng-click="launchKeys.splice($index, 1)">-->
                                        <!--<h4>-->
                                        <!--<li class="fa fa-trash"></li>-->
                                        <!--</h4>-->
                                        <!--</a>-->
                                        <!--</div>-->

                                        <!--</div>-->
                                        <!--<h3><a title="Add a new key to this NSR" href="" ng-click="addLaunchKey()">-->
                                        <!--<li class="fa fa-plus-square"></li>-->
                                        <!--</a></h3>-->
                                    </div>
                                    <div class="col-md-6">
                                        <p>
                                            <br> The following list shows all the Keys that will be imported to the VNF
                                            Component Instances.<br> <br>
                                        </p>
                                        <div ng-init="list.expanded=true">
                                            <p style="font-size:20px">
                                                <a href="" ng-if="list.expanded" ng-click="list.expanded = false">-</a>
                                                <a href="" ng-if="!list.expanded" ng-click="list.expanded = true">+</a>
                                                Allocated
                                                ({{launchKeys.length}})
                                            </p>
                                            <div ng-if="list.expanded">
                                                <table ng-table="tableParamsFilteredLaunchKeys"
                                                       class="table  table-bordered table-striped" show-filter="false">
                                                    <thead>
                                                    <tr>
                                                        <td colspan="3" filter="{name: 'text'}"
                                                            sortable="'name'"><b>Name</b></td>
                                                    </tr>
                                                    </thead>
                                                    <tr ng-repeat="key in $data">

                                                        <td class="col-md-7" style="word-wrap: break-word" td>
                                                            {{key.name}}
                                                        </td>
                                                        <td class="col-md-3"
                                                            style="word-wrap: normal; max-width: 100px; overflow: hidden; text-overflow: ellipsis;"
                                                            ng-attr-title="{{key.fingerprint}}">{{key.fingerprint}}
                                                        </td>
                                                        <td class="col-md-2">
                                                            <a ng-if="key.name.length"
                                                               title="Remove a key from this NSR" href=""
                                                               ng-click="removeLaunchKey(key)">Del
                                                            </a>
                                                        </td>
                                                    </tr>
                                                    <tr ng-show="!$data.length">
                                                        <td>
                                                            No keys are allocated.
                                                        </td>
                                                    </tr>
                                                    <!--<tr ng-if="key.expanded" ng-repeat-end="">-->
                                                    <!--<td colspan="2" style='text-align:center;vertical-align:middle'><h5>Public Key</h5></td>-->
                                                    <!--<td colspan="2" style="word-wrap: break-word">{{key.publicKey}}</td>-->
                                                    <!--</tr>-->
                                                </table>
                                            </div>
                                        </div>
                                        <!--<div class="form-group" ng-repeat="key in launchKeys track by $index">-->
                                        <!--&lt;!&ndash;label for="action" class="col-sm-2 control-label">Key</label&ndash;&gt;-->
                                        <!--<div class="col-sm-5">-->
                                        <!--<select name="typeSelect" class="form-control modal-select" id="action"-->
                                        <!--ng-model="launchKeys[$index]"-->
                                        <!--ng-options="key.name as key.name for key in keys"-->
                                        <!--ng-change="">-->
                                        <!--</select>-->
                                        <!--</div>-->
                                        <!--<div class="col-sm-1">-->
                                        <!--<a href="" ng-click="launchKeys.splice($index, 1)">-->
                                        <!--<h4>-->
                                        <!--<li class="fa fa-trash"></li>-->
                                        <!--</h4>-->
                                        <!--</a>-->
                                        <!--</div>-->
                                        <!--</div>-->
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="tab-pane" id="ConfigurationParameters">
                            <div class="container-fluid">
                                <p>
                                    <br>
                                    Configuration parameters are the dynamic parameters and would be used during
                                    lifecycle
                                    events
                                </p>
                                <tabset>

                                    <tab ng-repeat="vnfdname in vnfdnames track by $index" heading={{vnfdname}}>
                                        <div class="form-group">
                                            <div class="form row">
                                                <br/>
                                                <label style="padding-top: 10px;" for="Configuration Name"
                                                       class="col-sm-4 control-label">Configuration name</label>

                                                <div class="col-sm-6">
                                                    <input ng-disabled="launchConfiguration.configurations[vnfdname].id.length > 0 && launchConfiguration.configurations[vnfdname].name.length > 0"
                                                           type="text" class="form-control" id="Configuration Name"
                                                           ng-model="launchConfiguration.configurations[vnfdname].name"/>
                                                </div>
                                            </div>
                                        </div>
                                        <table style="margin-bottom: 0px;"
                                               class="table table-responsive table-bordered table-striped table-hover"
                                               id="vduTabletable">
                                            <thead>
                                            <tr style="text-align: center">
                                                <th style="width: 50%;"> &nbsp; Configuration key</th>
                                                <th> &nbsp;Configuration value</th>
                                            </tr>
                                            </thead>
                                        </table>
                                        <table class="table table-bordered table-striped table-hover"
                                               id="vduTabletable">
                                            <tbody>
                                            <tr ng-repeat="conf in launchConfiguration.configurations[vnfdname].configurationParameters track by $index">
                                                <td>
                                                    <table class="col-md-12">
                                                        <tr>
                                                            <td style="border: none !important;"><input
                                                                    placeholder="Configuration Key"
                                                                    ng-disabled="conf.id.length > 0" type="text"
                                                                    class="form-control"
                                                                    id="Configuration Name" ng-model="conf.confKey"
                                                            /></td>
                                                            <td style="border: none !important;"><input
                                                                    placeholder="Configuration Key Value" type="text"
                                                                    class="form-control" id="Configuration Name"
                                                                    ng-model="conf.value"
                                                            />
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="border: none !important;" colspan="2">
                                                            <textarea ng-disabled="conf.id.length > 0"
                                                                      style="width:100%; resize:vertical;"
                                                                      name="Description"
                                                                      ng-model="conf.description" id="conf.description"
                                                                      placeholder="Description"
                                                                      class="form-control">
                                </textarea>
                                                                <br ng-hide="conf.id.length > 0">
                                                                <button class="btn btn-danger"
                                                                        ng-disabled="conf.id.length > 0"
                                                                        ng-hide="conf.id.length > 0" type="button"
                                                                        ng-click="removeConf($index, vnfdname)">
                                                                    Delete
                                                                </button>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <a type="button" class="btn btn-primary" ng-click="addConftoLaunch(vnfdname)">Add
                                            Parameter</a>
                                    </tab>
                                </tabset>
                                <!--p>remove
            Configuration parameters are the dynamic parameters and would be used during lifecycle events
        </p>
        <div class="form-group">
            <div class="form row">
                <label for="Configuration Element" class="col-sm-4 control-label">Configuration for Element</label>

                <div class="col-sm-6">
                    <input type="text" class="form-control" id="Configuration Element" ng-model="basicConfiguration.name" />
                </div>
            </div>
            <div class="form row">
                <label for="Configuration Name" class="col-sm-4 control-label">Configuration name</label>

                <div class="col-sm-6">
                    <input type="text" class="form-control" id="Configuration Name" ng-model="basicConfiguraiton.config.name" />
                </div>
            </div>
        </div>
        <div ng-repeat="conf in basicConfiguration.config.configurationParameters track by $index" class="table-responsive">
            <table class="table table-bordered table-striped table-hover tablesorter" id="vduTabletable">
                <thead>
                    <tr>
                        <th> Configuration key </th>
                        <th> Configuration value</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" class="form-control" id="Configuration Name" ng-model="conf.confKey"
                            /></td>
                        <td><input type="text" class="form-control" id="Configuration Name" ng-model="conf.value"
                            /></td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-bordered table-striped table-hover tablesorter" id="vduTabletable">

                <tbody>
                    <tr>
                        <td><textarea style="width:100%;" name="Description" ng-model="conf.description" id="conf.description"
                                title="Here you can put a human readable description" class="form-control">
                </textarea></td>
                    </tr>
                </tbody>
            </table>
            <button type="button" class="btn btn-danger" ng-click="removeConf($index)">Remove Parameter</button>
            </br>
            </br>
        </div>

        <button type="button" class="btn btn-primary" ng-click="addConftoLaunch()">Add Parameter</button-->

                            </div>
                        </div>
                        <div class="tab-pane" id="MonitoringIP">
                            <br>
                            <b>Monitoring IP: &nbsp;</b>
                            <input style="width: 50%;display: inline;" class="form-control" type="text"
                                   ng-change="changeIp(monitoringIp)" ng-model="monitoringIp">
                        </div>
                    </div><!-- tab content -->
                </div><!-- end of container -->
            </div>
            <div class="modal-footer">
                <a class="btn left btn-danger" data-dismiss="modal">Cancel</a>
                <a class="btn btnPrevious">Back</a>
                <a class="btn btn-primary btnNext">Next</a>
                <button class="btn  btn-success" ng-disabled="vimForLaunch == '' ||  vimForLaunch == undefined "
                        data-dismiss="modal" ng-click="launch()">Launch
                </button>
            </div>
        </div>
    </div>
</div>
<!-- /.modal -->
<div class="modal fade" tabindex="-1" role="dialog" id="addKey" ng-controller="keyPairsCtrl">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Add a new key pair</h4>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal">
                    <div class="form-group">
                        <label for="keyName" class="col-sm-4 control-label">Key Name</label>

                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="keyName" name="importKeyName"
                                   ng-model="keyName"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="Pub key" class="col-sm-4 control-label">Public key</label>
                        <div class="col-sm-6">
                            <textarea style="width:350px;" name="Pub key" ng-model="pubKey" id="Pub key"
                                      class="form-control" rows="5" cols="50">
                        </textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal"
                        ng-click="importKey(keyName, pubKey)">Save
                </button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
<div class="modal fade" tabindex="-1" role="dialog" id="createKey" ng-controller="keyPairsCtrl">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Provide the name of the key</h4>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal">

                    <div class="form-group">
                        <label for="generateKeyName" class="col-sm-4 control-label">Key Name</label>

                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="generateKeyName" name="generateKeyName"
                                   ng-model="generateKeyName"/>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal"
                        ng-click="generateKey(generateKeyName)">Generate
                </button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
<div class="modal fade" id="modalFileCSAR" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Upload a CSAR NSD</h4>
            </div>
            <div class="modal-body">
                <form role="form" id="my-dropzone" class="">
                    <h4>Drag and drop files below</h4>

                    <div class="upload-drop-zone dz-clickable dz-default dz-message" id="drop-zone">
                        Just drag and drop files here
                    </div>

                    <div class="table table-striped" class="files" id="previews">

                        <div id="template" class="file-row">
                            <!-- This is used as the file preview template -->
                            <div>
                                <span class="preview"><img data-dz-thumbnail/></span>
                            </div>
                            <div>
                                <p class="name" data-dz-name></p>
                                <strong class="error text-danger" data-dz-errormessage></strong>
                            </div>
                            <div>
                                <p class="size" data-dz-size></p>

                                <div id="total-progress" class="progress progress-striped active" role="progressbar"
                                     aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                                    <div class="progress-bar progress-bar-success" style="width:0%;"
                                         data-dz-uploadprogress></div>
                                </div>
                            </div>
                            <div>
                                <button data-dz-remove class="btn btn-warning cancel">
                                    <i class="glyphicon glyphicon-ban-circle"></i>
                                    <span>Cancel</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default"
                        data-dismiss="modal">Close
                </button>
                <button type="button" id="submit-all" class="btn btn-primary">Send All</button>
            </div>
        </div>
    </div>
</div>